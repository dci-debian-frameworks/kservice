Description: Rename applications.menu file to prevent it clashing with
other desktops.  Longstanding issue with XDG menu spec which is
deliberately not changed so unable to forward upstream.
Forwarded: not-needed
Author: Jonathan Riddell <jr@jriddell.org>

Index: kservice/src/kbuildsycoca/CMakeLists.txt
===================================================================
--- kservice.orig/src/kbuildsycoca/CMakeLists.txt
+++ kservice/src/kbuildsycoca/CMakeLists.txt
@@ -32,5 +32,5 @@ install(TARGETS kbuildsycoca5 ${KF5_INST
 if (WIN32)
 install( FILES applications.menu  DESTINATION  ${KDE_INSTALL_DATAROOTDIR}/xdg/menus )
 else ()
-install( FILES applications.menu  DESTINATION  ${KDE_INSTALL_SYSCONFDIR}/xdg/menus )
+install( FILES applications.menu  DESTINATION  ${KDE_INSTALL_SYSCONFDIR}/xdg/menus RENAME kf5-applications.menu )
 endif ()
Index: kservice/src/kbuildsycoca/kbuildsycoca.cpp
===================================================================
--- kservice.orig/src/kbuildsycoca/kbuildsycoca.cpp
+++ kservice/src/kbuildsycoca/kbuildsycoca.cpp
@@ -307,7 +307,7 @@ bool KBuildSycoca::build()
             g_vfolder->setTrackId(m_trackId);
         }
 
-        VFolderMenu::SubMenu *kdeMenu = g_vfolder->parseMenu(QStringLiteral("applications.menu"));
+        VFolderMenu::SubMenu *kdeMenu = g_vfolder->parseMenu(QStringLiteral("kf5-applications.menu"));
 
         KServiceGroup::Ptr entry = g_buildServiceGroupFactory->addNew(QStringLiteral("/"), kdeMenu->directoryFile, KServiceGroup::Ptr(), false);
         entry->setLayoutInfo(kdeMenu->layoutList);
