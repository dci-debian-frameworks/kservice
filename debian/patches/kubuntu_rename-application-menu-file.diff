Description: Rename applications.menu file to prevent it clashing with
other desktops.  Longstanding issue with XDG menu spec which is
deliberately not changed so unable to forward upstream.
Forwarded: not-needed
Author: Jonathan Riddell <jr@jriddell.org>

Index: kservice/src/kbuildsycoca/CMakeLists.txt
===================================================================
--- kservice.orig/src/kbuildsycoca/CMakeLists.txt	2015-09-14 11:38:44.078463238 +0200
+++ kservice/src/kbuildsycoca/CMakeLists.txt	2015-09-14 11:38:44.074463397 +0200
@@ -32,5 +32,5 @@
 if (WIN32)
 install( FILES applications.menu  DESTINATION  ${KDE_INSTALL_DATAROOTDIR}/xdg/menus )
 else ()
-install( FILES applications.menu  DESTINATION  ${KDE_INSTALL_SYSCONFDIR}/xdg/menus )
+install( FILES applications.menu  DESTINATION  ${KDE_INSTALL_SYSCONFDIR}/xdg/menus RENAME kf5-applications.menu )
 endif ()
Index: kservice/src/kbuildsycoca/kbuildsycoca.cpp
===================================================================
--- kservice.orig/src/kbuildsycoca/kbuildsycoca.cpp	2015-09-14 11:38:44.078463238 +0200
+++ kservice/src/kbuildsycoca/kbuildsycoca.cpp	2015-09-14 11:39:51.651771116 +0200
@@ -301,7 +301,7 @@
             m_vfolder->setTrackId(m_trackId);
         }
 
-        VFolderMenu::SubMenu *kdeMenu = m_vfolder->parseMenu(QStringLiteral("applications.menu"));
+        VFolderMenu::SubMenu *kdeMenu = m_vfolder->parseMenu(QStringLiteral("kf5-applications.menu"));
 
         KServiceGroup::Ptr entry = m_buildServiceGroupFactory->addNew(QStringLiteral("/"), kdeMenu->directoryFile, KServiceGroup::Ptr(), false);
         entry->setLayoutInfo(kdeMenu->layoutList);
